/*
 * exinIIC.c
 *
 *  Created on: 2021年9月27日
 *      Author: 93793
 */

#include "headfile.h"
#include "exinIIC.h"


void IIC_init()
{
    IIC_SCL_OUT;
    IIC_SDA_OUT;
}
//IIC起始信号
void IIC_start()
{
    IIC_SCL_HIGH;
    IIC_SDA_HIGH;//起始均为高电平
    IIC_delay;
    IIC_SDA_LOW;//先把SDA拉低
    IIC_delay;
    IIC_SCL_LOW;//再把SCL拉低
    IIC_delay;
}
//IIC停止信号
void IIC_stop()
{
    IIC_SCL_HIGH;
    IIC_SDA_LOW;
    IIC_delay;
    IIC_SDA_HIGH;
    IIC_delay;
}

//主机应答从机
void IIC_ACK(uint8 ACK_FLAG)
{
    IIC_SCL_LOW;
    IIC_delay;
    if(ACK_FLAG==1)//主机应答
    {
        IIC_SDA_LOW;IIC_delay;
    }

    else if(ACK_FLAG==0)//主机不应答
    {
        IIC_SDA_HIGH;IIC_delay;
    }
    IIC_SCL_HIGH;
    IIC_delay;
    IIC_SCL_LOW;
}
//主机检查从机是否应答
unsigned char Check_ACK()
{
    IIC_SCL_LOW;//设置为低电平
    IIC_delay;//进行延时
    IIC_SCL_HIGH;//拉高时钟线
    IIC_delay;
    if(IIC_SDA_READ==1)
    {
        return 0;
    }
    else
    {
        return 1;
    }
}
